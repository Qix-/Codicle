<!doctype html>
<html>
	<head>
		<title>Codicle | Ace + Console Tickscript Test</title>
		<style type="text/css">
		* {
			margin: 0;
			padding: 0;
			position: relative;
			border: none;
		}

		html, body {
			width: 100%;
			height: 100%;
		}

		#left, #right {
			width: 50%;
			height: 100%;
			display: inline-block;
			position: absolute;
		}

		#left {
			top: 0px;
			left: 0px;
		}

		#right {
			top: 0px;
			right: 0px;
		}

		#right > div {
			height: 95%;
			width: 100%;
			display: block;
			background-color: #222;
			color: lightgray;
			font-family: "Consolas", "Courier New", "Courier MS", monospace;
			font-size: 11px;
			overflow-x: auto;
			overflow-y: scroll;
		}

		#right input {
			height: 30px;
			width: 100%;
			background-color: #222;
			color: lightgray;
			font-family: "Consolas", "Courier New", "Courier MS", monospace;
			font-size: 11px;
			border: none;
		}
		</style>
		<link rel="stylesheet" type="text/css" href="../deps/bashjs/css/bash-ansi.css" />
		<script type="text/javascript">
		window.Codicle = {};
		</script>
		<script type="text/javascript" src="../deps/ace/ace-builds/src-noconflict/ace.js"></script>
		<script type="text/javascript" src="../deps/bashjs/lib/Bash-Ansi.js"></script>
		<script type="text/javascript" src="../pkg/static/js/TickScript-v1-Receiver.js"></script>
		<script type="text/javascript" src="../pkg/static/js/TickScript-v1-Receiver-Ace.js"></script>
		<script type="text/javascript" src="../pkg/static/js/TickScript-v1-Parser.js"></script>
		<script type="text/javascript" src="../pkg/static/js/TickScript-v1-Interpreter.js"></script>
		<script type="text/javascript" src="../pkg/static/js/Cmd-Parser.js"></script>
		<script type="text/javascript" src="../pkg/static/js/Cmd-Interpreter.js"></script>
		<script type="text/javascript" src="../pkg/static/js/TickScript.js"></script>
		<script type="text/javascript">
		window.addEventListener("load", function()
		{
			window.editor = ace.edit('left');

			// Create some ticks
			var ticks = ">eF:AF:BF:\nF:CF:DF^UF:EF^DF:FF^LF:GF^RF:HF*2;F#F#F:IF^LF/F:JF<F@0,1;F#F#F#"
				+ ">pB:eB:cB:hB:oB: B:hB:eB:lB:lB:oF#F^UF#F*2;F:AF:BF^LF/F<F:HF:iF:!F@0,0;F/F*2;F#";

			// Create a TickScript
			var tickScript = {
				"version": "v1",
				"name": "Test Tickscript",
				"author": "Qix",
				"audio": "null",
				"bgm": "null",
				"chapters": {},
				"ticks": ticks
			};

			// Create CLI
			var cli = new Codicle.CLI(
				document.querySelector('input'),
				document.querySelector('#output')
				);

			// Generate object
			var script = new Codicle.Script(tickScript, editor, cli);

			// Timeout all events
			for(var i = 0, len = script.commands.events.length; i < len; i++) {
				setTimeout(script.commands.events[i][1], script.commands.events[i][0] * 1000)
			}
		});
		</script>
	</head>
	<body>
		<div id="left"></div>
		<div id="right">
			<div id="output"></div>
			<input type="text" id="input" />
		</div>
	</body>
</html>